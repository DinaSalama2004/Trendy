
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 px-2" [class]="gridCols">

  @for (product of products; track product._id) {

    <!--  Wrapper -->
    <div
      class="group overflow-hidden bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 
             hover:border-orange-500 hover:shadow-2xl hover:shadow-orange-200 
             dark:hover:shadow-orange-500/20 transition-transform transform hover:-translate-y-2 duration-300 flex flex-col h-full ">

      <!-- Heart Icon -->
      <div class="relative group">
        <div class="absolute top-2 right-4 z-10 text-xl  hover:text-red-800 transition">
          <i class="fa-solid fa-heart cursor-pointer" 
          (click)="addToWish(product._id)" 
          [class]="isInWishlist(product._id) ? 'text-red-600' : 'text-gray-600'">
       </i>
       
        </div>
      </div>

      <!-- Product info  -->
       
      <div class="card-without-btn cursor-pointer overflow-hidden" [routerLink]="['/details', product._id]">
        <div class="relative">
          <img [src]="product.imageCover" alt="{{ product.title }}"
            class="h-50 w-full object-cover group-hover:scale-105 transition duration-300" />
          <span
            class="absolute top-2 left-2 bg-blue-600 text-white text-xs font-semibold px-3 py-1 rounded-full shadow">
            {{ product.category?.name }}
          </span>
        </div>

        <!-- Product Info -->
        <div class="p-5 flex-grow flex flex-col">
          <h3 class="text-lg font-bold text-gray-800 dark:text-white truncate">{{ product.title }}</h3>

          <p class="text-sm text-gray-500 dark:text-gray-300 mt-1 mb-3">
            {{ product.description.split(' ').slice(0, 5).join(' ') }}
          </p>

          <!-- Price and Rating -->
          <div class="flex justify-between items-center mt-auto">
            <span class="text-orange-600 font-bold text-lg">{{ product.price }} EGP</span>
            <div class="flex items-center gap-1 text-yellow-400 font-semibold text-sm">
              {{ product.ratingsAverage }}
              <i class="fa-solid fa-star"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Add to Cart -->
      <div class="px-5 pb-4 flex flex-wrap justify-between">
        <button
          class="w-full bg-orange-500 flex justify-around hover:bg-orange-600 text-white text-sm py-2 rounded-lg font-medium transition cursor-pointer"
          (click)="addToCard(product._id)">
         <p> Add to Cart</p>
                   @if (isLoading()[product._id]) {

        <i class="fa-solid fa-spinner fa-spin-pulse fa-spin-reverse"></i>
        }

        </button>


   
      </div>
    </div>

  }

  @empty {
    <div class="col-span-full text-center py-10">
      <p class="text-gray-500 dark:text-gray-300 text-lg font-medium">No products found.</p>
      <img src="images/waiting_image.png" alt="Empty search"
        class="mx-auto mt-4 w-24 h-24 opacity-70 dark:opacity-50" />
    </div>
  }

</div>
